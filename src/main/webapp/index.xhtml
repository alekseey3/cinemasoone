<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

<ui:composition template="/WEB-INF/template.xhtml">
    <ui:define name="content">

        <h2>–û–∂–∏–¥–∞–µ–º—ã–µ —Ñ–∏–ª—å–º—ã</h2>
        <p>–î–æ–±–∞–≤—å —Ñ–∏–ª—å–º, –∫–æ—Ç–æ—Ä—ã–π —Ç—ã –∂–¥—ë—à—å ‚Äì –∏ –æ–Ω –ø–æ—è–≤–∏—Ç—Å—è –≤ –æ–±—â–µ–º —Å–ø–∏—Å–∫–µ.</p>

        <!-- –§–û–†–ú–ê –î–û–ë–ê–í–õ–ï–ù–ò–Ø –ù–û–í–û–ì–û –§–ò–õ–¨–ú–ê -->
        <h:form>
            <!-- –≤—ã–≤–æ–¥ –æ—à–∏–±–æ–∫ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ -->
            <h:messages style="color: #ff5555; margin-bottom: 10px;" />

            <div class="form-row">
                <label>–ù–∞–∑–≤–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞</label>
                <h:inputText value="#{movieBean.newMovie.title}"
                             required="true"
                             requiredMessage="–ù–∞–∑–≤–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ"/>
            </div>

            <div class="form-row">
                <label>–ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º–∞—è –¥–∞—Ç–∞ –≤—ã—Ö–æ–¥–∞</label>
                <!-- HTML5 date-picker + –∫–æ–Ω–≤–µ—Ä—Ç–µ—Ä –≤ java.util.Date -->
                <h:inputText value="#{movieBean.newMovie.releaseDate}">
                    <f:convertDateTime pattern="yyyy-MM-dd"/>
                    <f:passThroughAttribute name="type" value="date"/>
                </h:inputText>
            </div>

            <div class="form-row">
                <label>–ñ–∞–Ω—Ä</label>
                <!-- –≤—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ –∂–∞–Ω—Ä–æ–≤ -->
                <h:selectOneMenu value="#{movieBean.newMovie.genre}">
                    <f:selectItem itemLabel="-- –≤—ã–±–µ—Ä–∏—Ç–µ –∂–∞–Ω—Ä --" itemValue="" noSelectionOption="true"/>
                    <f:selectItem itemLabel="–§–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞" itemValue="–§–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞"/>
                    <f:selectItem itemLabel="–ë–æ–µ–≤–∏–∫" itemValue="–ë–æ–µ–≤–∏–∫"/>
                    <f:selectItem itemLabel="–î—Ä–∞–º–∞" itemValue="–î—Ä–∞–º–∞"/>
                    <f:selectItem itemLabel="–ö–æ–º–µ–¥–∏—è" itemValue="–ö–æ–º–µ–¥–∏—è"/>
                    <f:selectItem itemLabel="–£–∂–∞—Å—ã" itemValue="–£–∂–∞—Å—ã"/>
                    <f:selectItem itemLabel="–ê–Ω–∏–º–∞—Ü–∏—è" itemValue="–ê–Ω–∏–º–∞—Ü–∏—è"/>
                </h:selectOneMenu>
            </div>

            <div class="form-row">
                <label>–ü–æ—á–µ–º—É –∂–¥—ë—à—å / –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ</label>
                <h:inputTextarea value="#{movieBean.newMovie.description}" rows="3"/>
            </div>

            <h:commandButton value="–î–æ–±–∞–≤–∏—Ç—å" action="#{movieBean.addMovie}" styleClass="btn"/>
        </h:form>

        <hr/>

        <!-- –§–û–†–ú–ê –†–ï–î–ê–ö–¢–ò–†–û–í–ê–ù–ò–Ø –§–ò–õ–¨–ú–ê -->
        <h:panelGroup rendered="#{movieBean.editing}">
            <h3>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞</h3>
            <h:form>
                <h:messages style="color: #ff5555; margin-bottom: 10px;" />

                <div class="form-row">
                    <label>–ù–∞–∑–≤–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞</label>
                    <h:inputText value="#{movieBean.editingMovie.title}" required="true"
                                 requiredMessage="–ù–∞–∑–≤–∞–Ω–∏–µ —Ñ–∏–ª—å–º–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ"/>
                </div>

                <div class="form-row">
                    <label>–ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º–∞—è –¥–∞—Ç–∞ –≤—ã—Ö–æ–¥–∞</label>
                    <h:inputText value="#{movieBean.editingMovie.releaseDate}">
                        <f:convertDateTime pattern="yyyy-MM-dd"/>
                        <f:passThroughAttribute name="type" value="date"/>
                    </h:inputText>
                </div>

                <div class="form-row">
                    <label>–ñ–∞–Ω—Ä</label>
                    <h:selectOneMenu value="#{movieBean.editingMovie.genre}">
                        <f:selectItem itemLabel="-- –≤—ã–±–µ—Ä–∏—Ç–µ –∂–∞–Ω—Ä --" itemValue="" noSelectionOption="true"/>
                        <f:selectItem itemLabel="–§–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞" itemValue="–§–∞–Ω—Ç–∞—Å—Ç–∏–∫–∞"/>
                        <f:selectItem itemLabel="–ë–æ–µ–≤–∏–∫" itemValue="–ë–æ–µ–≤–∏–∫"/>
                        <f:selectItem itemLabel="–î—Ä–∞–º–∞" itemValue="–î—Ä–∞–º–∞"/>
                        <f:selectItem itemLabel="–ö–æ–º–µ–¥–∏—è" itemValue="–ö–æ–º–µ–¥–∏—è"/>
                        <f:selectItem itemLabel="–£–∂–∞—Å—ã" itemValue="–£–∂–∞—Å—ã"/>
                        <f:selectItem itemLabel="–ê–Ω–∏–º–∞—Ü–∏—è" itemValue="–ê–Ω–∏–º–∞—Ü–∏—è"/>
                    </h:selectOneMenu>
                </div>

                <div class="form-row">
                    <label>–ü–æ—á–µ–º—É –∂–¥—ë—à—å / –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ</label>
                    <h:inputTextarea value="#{movieBean.editingMovie.description}" rows="3"/>
                </div>

                <h:commandButton value="–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è"
                                 action="#{movieBean.saveEdit}"
                                 styleClass="btn"/>
                <h:commandButton value="–û—Ç–º–µ–Ω–∞"
                                 action="#{movieBean.cancelEdit}"
                                 immediate="true"
                                 styleClass="btn"
                                 style="margin-left: 8px;"/>
            </h:form>
            <hr/>
        </h:panelGroup>

        <!-- –°–ü–ò–°–û–ö –û–ñ–ò–î–ê–ï–ú–´–• –§–ò–õ–¨–ú–û–í -->
        <h3>–°–ø–∏—Å–æ–∫ –æ–∂–∏–¥–∞–Ω–∏–π</h3>

        <h:panelGroup rendered="#{not empty movieBean.movies}">
            <h:form>
                <ui:repeat value="#{movieBean.movies}" var="m">
                    <div class="movie-card">
                        <div class="movie-title">
                            #{m.title}
                            <h:panelGroup rendered="#{m.releaseDate != null}">
                                <span class="badge">
                                    <h:outputText value="#{m.releaseDate}">
                                        <f:convertDateTime pattern="yyyy-MM-dd"/>
                                    </h:outputText>
                                </span>
                            </h:panelGroup>
                        </div>
                        <div>
                            <b>–ñ–∞–Ω—Ä:</b> #{empty m.genre ? '‚Äî' : m.genre}
                        </div>
                        <div>
                            <b>–û–ø–∏—Å–∞–Ω–∏–µ:</b>
                            <h:outputText value="#{empty m.description ? '‚Äî' : m.description}"/>
                        </div>
                        <div style="margin-top: 8px;">
                            <h:commandButton value="üëç #{m.likes}"
                                             action="#{movieBean.likeMovie(m.id)}"
                                             styleClass="btn"/>
                            <h:commandButton value="–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å"
                                             action="#{movieBean.startEdit(m)}"
                                             styleClass="btn"
                                             style="margin-left: 8px;"/>
                            <h:commandButton value="–£–¥–∞–ª–∏—Ç—å"
                                             action="#{movieBean.deleteMovie(m.id)}"
                                             styleClass="btn btn-danger"
                                             style="margin-left: 8px;"/>
                        </div>
                    </div>
                </ui:repeat>
            </h:form>
        </h:panelGroup>

        <h:panelGroup rendered="#{empty movieBean.movies}">
            –ü–æ–∫–∞ –Ω–∏–∫—Ç–æ –Ω–µ –¥–æ–±–∞–≤–∏–ª –Ω–∏ –æ–¥–Ω–æ–≥–æ —Ñ–∏–ª—å–º–∞. –ë—É–¥—å –ø–µ—Ä–≤—ã–º!
        </h:panelGroup>

    </ui:define>
</ui:composition>

</html>